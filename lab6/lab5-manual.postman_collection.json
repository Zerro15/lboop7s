{
  "info": {
    "name": "Lab5 API Tests - Final",
    "description": "–§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ç–µ—Å—Ç–æ–≤ –±–µ–∑ —Ñ–∏–∫—Ç–∏–≤–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080/lab5",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "functionId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});"
            ]
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/",
          "host": ["{{baseUrl}}"],
          "path": [""]
        }
      },
      "response": []
    },
    {
      "name": "üë• Users API",
      "item": [
        {
          "name": "POST Create User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// –ì–∏–±–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞",
                  "pm.test(\"–°—Ç–∞—Ç—É—Å –≤ –¥–æ–ø—É—Å—Ç–∏–º–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 400, 401]);",
                  "});",
                  "",
                  "// –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω",
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    pm.test(\"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData.success || jsonData.id).to.be.ok;",
                  "        if (jsonData.id) {",
                  "            pm.environment.set(\"userId\", jsonData.id);",
                  "            console.log(\"‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω —Å ID: \" + jsonData.id);",
                  "        }",
                  "    });",
                  "} else if (pm.response.code === 400) {",
                  "    console.log(\"  Bad Request - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞:\");",
                  "    console.log(\"–ó–∞–ø—Ä–æ—Å: \" + pm.request.body.raw);",
                  "    console.log(\"–û—Ç–≤–µ—Ç: \" + pm.response.text());",
                  "    ",
                  "    pm.test(\"–ü—Ä–∏ 400 –µ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData.message || jsonData.error || jsonData).to.be.ok;",
                  "    });",
                  "} else if (pm.response.code === 401) {",
                  "    console.log(\"  –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\");",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"login\": \"testuser_{{$timestamp}}\",\n  \"role\": \"USER\",\n  \"password\": \"testpass123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["users"]
            }
          },
          "response": []
        },
        {
          "name": "GET All Users",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å",
                  "pm.test(\"–°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—É—á–µ–Ω\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 401]);",
                  "});",
                  "",
                  "// –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ",
                  "if (pm.response.code === 200) {",
                  "    pm.test(\"–û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.be.an('array');",
                  "    });",
                  "} else if (pm.response.code === 401) {",
                  "    console.log(\"  –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\");",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["users"]
            }
          },
          "response": []
        },
        {
          "name": "GET User by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"–°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 401, 404]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test(\"–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData.id).to.be.a('number');",
                  "        pm.expect(jsonData.login).to.be.a('string');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}"]
            }
          },
          "response": []
        },
        {
          "name": "PUT Update User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"–°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400, 401, 404]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test(\"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData.success).to.be.true;",
                  "    });",
                  "} else if (pm.response.code === 400) {",
                  "    console.log(\"  Bad Request –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏:\");",
                  "    console.log(\"–û—Ç–≤–µ—Ç: \" + pm.response.text());",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"login\": \"updated_{{$timestamp}}\",\n  \"role\": \"ADMIN\",\n  \"password\": \"newpass456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}"]
            }
          },
          "response": []
        },
        {
          "name": "DELETE User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤",
                  "pm.test(\"1. –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—É—á–µ–Ω\", function () {",
                  "    pm.expect(pm.response.code).to.be.ok;",
                  "});",
                  "",
                  "pm.test(\"2. –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –≤ –Ω–æ—Ä–º–µ\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(5000);",
                  "});",
                  "",
                  "pm.test(\"3. –°—Ç–∞—Ç—É—Å —É–¥–∞–ª–µ–Ω–∏—è\", function () {",
                  "    // –ü—Ä–∏–Ω–∏–º–∞–µ–º 200, 400, 401 –∏–ª–∏ 404",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400, 401, 404]);",
                  "});",
                  "",
                  "pm.test(\"4. –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞\", function () {",
                  "    if (pm.response.code === 200) {",
                  "        pm.response.to.be.json;",
                  "    }",
                  "});",
                  "",
                  "pm.test(\"5. –†–µ–∑—É–ª—å—Ç–∞—Ç —É–¥–∞–ª–µ–Ω–∏—è\", function () {",
                  "    if (pm.response.code === 200) {",
                  "        var json = pm.response.json();",
                  "        pm.expect(json.success || json.message).to.be.ok;",
                  "    }",
                  "});",
                  "",
                  "// –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏",
                  "pm.test(\"6. –ó–∞–≥–æ–ª–æ–≤–æ–∫ Content-Type\", function () {",
                  "    pm.response.to.have.header('Content-Type');",
                  "});",
                  "",
                  "pm.test(\"7. –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç\", function () {",
                  "    pm.expect(pm.response.headers).to.be.an('object');",
                  "});",
                  "",
                  "pm.test(\"8. –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ - —á–∏—Å–ª–æ\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.a('number');",
                  "});",
                  "",
                  "pm.test(\"9. –°—Ç–∞—Ç—É—Å –∫–æ–¥ - —á–∏—Å–ª–æ\", function () {",
                  "    pm.expect(pm.response.code).to.be.a('number');",
                  "});",
                  "",
                  "pm.test(\"10. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞\", function () {",
                  "    console.log(`DELETE –∑–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–µ–Ω –∑–∞ ${pm.response.responseTime}ms, —Å—Ç–∞—Ç—É—Å: ${pm.response.code}`);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Functions API",
      "item": [
        {
          "name": "POST Create Function",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"–°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([201, 200, 400, 401]);",
                  "});",
                  "",
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    pm.test(\"–§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData.success).to.be.true;",
                  "        pm.expect(jsonData.id).to.be.a('number');",
                  "        pm.environment.set(\"functionId\", jsonData.id);",
                  "        console.log(\"‚úÖ –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ —Å ID: \" + jsonData.id);",
                  "    });",
                  "} else if (pm.response.code === 400) {",
                  "    console.log(\"  Bad Request –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏:\");",
                  "    console.log(\"–ó–∞–ø—Ä–æ—Å: \" + pm.request.body.raw);",
                  "    console.log(\"–û—Ç–≤–µ—Ç: \" + pm.response.text());",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"name\": \"quadratic_function\",\n  \"signature\": \"f(x) = x^2\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/functions",
              "host": ["{{baseUrl}}"],
              "path": ["functions"]
            }
          },
          "response": []
        },
        {
          "name": "GET All Functions",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var tests = [",
                  "    { name: '1. –°—Ç–∞—Ç—É—Å –∫–æ–¥ –ø–æ–ª—É—á–µ–Ω', test: function() { pm.expect(pm.response.code).to.be.ok; } },",
                  "    { name: '2. –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –≤ –Ω–æ—Ä–º–µ', test: function() { pm.expect(pm.response.responseTime).to.be.below(5000); } },",
                  "    { name: '3. –ó–∞–≥–æ–ª–æ–≤–æ–∫ Content-Type', test: function() { pm.response.to.have.header('Content-Type'); } },",
                  "    { name: '4. –°—Ç–∞—Ç—É—Å –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞', test: function() { pm.expect(pm.response.status).to.be.a('string'); } },",
                  "    { name: '5. –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –¥–ª—è 200', test: function() {",
                  "        if (pm.response.code === 200) { pm.response.to.be.json; }",
                  "    } },",
                  "    { name: '6. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è 200', test: function() {",
                  "        if (pm.response.code === 200) {",
                  "            var data = pm.response.json();",
                  "            pm.expect(data).to.be.an('array');",
                  "        }",
                  "    } },",
                  "    { name: '7. –≠–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–∞', test: function() {",
                  "        if (pm.response.code === 200 && pm.response.json().length > 0) {",
                  "            var item = pm.response.json()[0];",
                  "            pm.expect(item).to.be.an('object');",
                  "        }",
                  "    } },",
                  "    { name: '8. –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞', test: function() { pm.expect(pm.response.responseSize).to.be.a('number'); } },",
                  "    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ date (case insensitive)",
                  "    { name: '9. –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–∞—Ç—ã', test: function() {",
                  "        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ª—é–±–æ–≥–æ –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤",
                  "        var hasDateHeader = pm.response.headers.has('date') || pm.response.headers.has('Date');",
                  "        pm.expect(hasDateHeader).to.be.true;",
                  "    } },",
                  "    // –ò—Å–ø–æ–ª—å–∑—É–µ–º responseTime –≤–º–µ—Å—Ç–æ time",
                  "    { name: '10. –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –∫–∞–∫ —á–∏—Å–ª–æ', test: function() {",
                  "        pm.expect(pm.response.responseTime).to.be.a('number');",
                  "    } },",
                  "    { name: '11. –õ–æ–≥ —Ä–∞–∑–º–µ—Ä–∞ –æ—Ç–≤–µ—Ç–∞', test: function() {",
                  "        console.log(`–†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞: ${pm.response.responseSize} –±–∞–π—Ç`);",
                  "    } },",
                  "    { name: '12. –õ–æ–≥ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞', test: function() {",
                  "        console.log(`–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ${pm.response.responseTime}–º—Å`);",
                  "    } },",
                  "    { name: '13. –õ–æ–≥ —Å—Ç–∞—Ç—É—Å–∞', test: function() {",
                  "        console.log(`–°—Ç–∞—Ç—É—Å: ${pm.response.code} ${pm.response.status}`);",
                  "    } },",
                  "    { name: '14. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏', test: function() {",
                  "        var times = JSON.parse(pm.environment.get('response_times') || '[]');",
                  "        times.push({",
                  "            endpoint: 'GET /functions',",
                  "            time: pm.response.responseTime,",
                  "            size: pm.response.responseSize",
                  "        });",
                  "        pm.environment.set('response_times', JSON.stringify(times));",
                  "    } },",
                  "    { name: '15. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫', test: function() {",
                  "        console.log('–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ GET /functions –∑–∞–≤–µ—Ä—à–µ–Ω—ã');",
                  "    } }",
                  "];",
                  "",
                  "// –í—ã–ø–æ–ª–Ω—è–µ–º –≤—Å–µ —Ç–µ—Å—Ç—ã",
                  "tests.forEach(function(testCase) {",
                  "    pm.test(testCase.name, testCase.test);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/functions",
              "host": ["{{baseUrl}}"],
              "path": ["functions"]
            }
          },
          "response": []
        },
        {
          "name": "GET Function by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"–°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400, 401, 404]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test(\"–î–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        var functionId = pm.environment.get(\"functionId\");",
                  "        if (functionId) {",
                  "            pm.expect(jsonData.id).to.eql(parseInt(functionId));",
                  "        }",
                  "    });",
                  "} else if (pm.response.code === 400) {",
                  "    console.log(\"  Bad Request –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏:\");",
                  "    console.log(\"–û—Ç–≤–µ—Ç: \" + pm.response.text());",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/functions/{{functionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["functions", "{{functionId}}"]
            }
          },
          "response": []
        },
        {
          "name": "GET Functions by User ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"–°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400, 401]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test(\"–§—É–Ω–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.be.an('array');",
                  "    });",
                  "} else if (pm.response.code === 400) {",
                  "    console.log(\"  Bad Request –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:\");",
                  "    console.log(\"–û—Ç–≤–µ—Ç: \" + pm.response.text());",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/functions/user/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["functions", "user", "{{userId}}"]
            }
          },
          "response": []
        }
      ]
    }
  ]
}